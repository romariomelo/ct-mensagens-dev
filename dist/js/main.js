!function(n){var t={};function e(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=n,e.c=t,e.d=function(n,t,a){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:a})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var s in n)e.d(a,s,function(t){return n[t]}.bind(null,s));return a},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=1)}([function(n,t,e){"use strict";e.r(t),e.d(t,"lerMais",function(){return a}),e.d(t,"getDataRelativa",function(){return s});const a=function(n,t=50){if(n.length<=t)return n;if(n.length>t){for(;" "!==n[t];)t+=1;return n.substring(0,t)+"... Ler mais."}},s=function(n){let t=moment(n),e=moment(new Date).diff(t,"days");return 0===e?t.format("[Hoje às] HH:mm"):1===e?t.format("[Ontem às] HH:mm"):e<180?t.format("[Em] DD [de] MMM"):t.format("[Em] DD/MM/YYYY")}},function(n,t,e){$?$.summernote?$.summernote.version&&"0.8.12"!=$.summernote.version&&console.error("Versão do Summernote deve ser 0.8.12!"):console.error("Summernote é necessário!"):console.warn("jQuery é necessário!"),window.CTMesagem=e(2),window.CTToast=e(8),window.CTToast=new CTToast},function(n,t,e){var a=e(3),s=e(4),o=e(5),r=e(6),i=e(7);n.exports=class{constructor(n=null){this.config={},this.mensagens=[],null!==n&&(this.config=Object.assign(this.config,n))}renderCaixaDeEntrada(n){$(n).addClass("ct-mensagem"),Array.isArray(this.mensagens)||$(n).html("<p>Mensagens não encontradas, favor recarregue a página!</p>"),$(n).html(a(this.mensagens,this.config))}renderUltimasMensagens(n){$(n).addClass("ct-ultimas-mensagens"),Array.isArray(this.mensagens)||$(n).html("<p>Mensagens não encontradas, favor recarregue a página!</p>"),$(n).html(s(this.mensagens,this.config))}renderResponder(n,t){$(t).addClass("ct-mensagem-reply"),$(t).html(o(n),this.config),this.createEditor("#ctM_texto"),$("#ctM_divResponderRenderized").attr("data-codigo",n.alerta.codigo)}renderConversa(n,t){$(t).html(r(n,this.config))}renderMensagensEnviadas(n,t){console.log(this.config),$(n).html(i(t,this.config))}setMensagens(n){Array.isArray(this.mensagens)?this.mensagens=n:console.warn("Mensagens deve ser um Array.")}getMensagens(){return this.mensagens}btnLidaNaoLidaClick(n){if("function"==typeof n){let t=this;$(".btn-marcar-como-nao-lida").click(function(){var e=$(this).closest(".inbox-row").attr("data-codigo"),a=t.getMsgById(e);n(a)})}else console.error("Você deve passar uma função como parâmetro.")}btnResponderClick(n){if("function"==typeof n){let t=this;$(".btn-responder").click(function(){var e=$(this).closest(".ct-info-mensagem").attr("data-codigo"),a=t.getMsgById(e);n(a)})}else console.error("Você deve passar uma função como parâmetro.")}btnExcluirClick(n){if("function"==typeof n){let t=this;$(".btn-excluir").click(function(){var e=$(this).closest(".ct-info-mensagem").attr("data-codigo"),a=t.getMsgById(e);n(a)})}else console.error("Você deve passar uma função como parâmetro.")}btnEnviarRespostaClick(n){if("function"==typeof n){let t=this;$("#ctM_btnEnviarResposta").click(function(){let e=$(this).closest("#ctM_divResponderRenderized"),a={titulo:e.find("input[name=titulo]").val(),texto:e.find("textarea[name=texto]").val()},s=$(this).closest("#ctM_divResponderRenderized").attr("data-codigo"),o=t.getMsgById(s);n(o,a)})}}btnNovaMensagemClick(n){"function"==typeof n&&$("#bt-nova-mensagem").click(function(){$(".nav-msg").removeAttr("disabled"),$(this).attr("disabled","disabled"),n()})}btnCaixaDeEntradaClick(n){"function"==typeof n?$("#bt-caixa-de-entrada").click(function(){n()}):console.error("Parâmetro deve ser função.")}btnMensagensEnviadasClick(n){"function"==typeof n?$("#bt-minhas-mensagens").click(function(){$(".nav-msg").removeAttr("disabled"),$(this).attr("disabled","disabled"),n()}):console.error("Parâmetro deve ser função.")}getMsgById(n){if(Array.isArray(this.mensagens)){let t=null;return this.mensagens.forEach(function(e){e.alerta.codigo!==parseInt(n)||(t=e)}),t}console.error("Mensagens devem ser Array.")}setTitulo(n){$("#iboxCaixaDeEntrada h5").text(n)}getCaixaDeEntradaButton(){return $("#bt-caixa-de-entrada")}getNovaMensagemButton(){return $("#bt-nova-mensagem")}createEditor(n){$(n).summernote({toolbar:[["style",["undo","redo","bold","italic","underline","clear","forecolor"]],["para",["ul","paragraph","style"]]],popover:{},lang:"pt-BR",height:"500px"})}destroyEditor(n){$(n).summernote("destroy")}}},function(n,t,e){var a=e(0);caixaDeEntrada=function(n,t){if(0===n.length)return i(t);var e=cabecalhoCaixaDeEntrada(t);return e+='<div id="ctM_corpo_caixaDeEntrada">',n.forEach(n=>{e+=itemCaixaDeEntrada(n,t)}),e+="</div>"},cabecalhoCaixaDeEntrada=function(n){return`\n    <div class="row">\n    ${l(n)}\n    ${btnCaixaDeEntrada(n)}\n    ${btnMensagensEnviadas(n)}\n    ${btnNovaMensagem(n)}    \n    </div>\n    `},itemCaixaDeEntrada=function(n,t){let e=null===n.read_at?"no-read":"",i=null===n.alerta.user.foto?t.base_url+"/images/sem_foto.jpg":t.webservice_url+"/Usuario/"+n.alerta.user.foto,l=a.lerMais(n.alerta.titulo);return`\n    <div class="row inbox-row ct-info-mensagem ${e}" data-codigo="${n.alerta.codigo}">\n        <div class="col col-xs-12 col-sm-3 col-sm-push-9 text-right">\n            ${s(n)}\n            ${r(n)}\n            ${o(n)}\n        </div>\n        <div class="col col-xs-12 col-sm-1 col-sm-pull-3 inbox-avatar">\n            <a href="${t.base_url}/avisos/mensagens/${n.alerta.codigo}">\n                <img src="${i}" class="img-responsive img-circle">\n            </a>\n        </div>\n        <div class="col col-xs-12 col-sm-8 col-sm-pull-3">\n            <a href="${t.base_url}/avisos/mensagens/${n.alerta.codigo}">\n                <h4 class="inbox-nome">${n.alerta.user.name}</h4>\n                <h5 class="inbox-assunto">${l}</h5>\n                <p>${n.alerta.texto}</p>\n                <small>${a.getDataRelativa(n.alerta.created_at)}</small>\n            </a>\n        </div>\n    </div>\n    `};var s=function(n){return'\n            <button class="btn btn-default btn-excluir" title="Excluir Mensagem">\n                <i class="fa fa-trash"></i>\n            </button>\n    '},o=function(n){let t=null===n.read_at?"fa-envelope-open":"fa-envelope";return`\n        <button class="btn btn-default btn-marcar-como-nao-lida" title="${null===n.read_at?"Marcar mensagem como lida.":"Marcar mensagem como não lida"}">\n            <i class="fa ${t}"></i>\n        </button>\n    `},r=function(n){return'\n            <button class="btn btn-default btn-responder" title="Responder">\n                <i class="fa fa-reply"></i>\n            </button>\n    '},i=function(n){return cabecalhoCaixaDeEntrada(n)+'\n    <div id="ctM_corpo_caixaDeEntrada">\n        <h2 style="text-align:center">Você não possui mensagens!</h2>\n    </div>\n    '},l=function(n){return`\n<div class="form-group  col-lg-2 col-md-3 col-sm-6">\n\t<a href="${n.base_url}">\n\t\t<button class="btn btn-danger btn-block" type="button"><i class="fa fa-arrow-left"></i> Retornar\n\t\t</button>\n\t</a>\n</div>`};btnCaixaDeEntrada=function(n){return'<div class="form-group  col-lg-2 col-md-3 col-sm-6">\n                    <button class="btn btn-white btn-block nav-msg" disabled="" type="button" id="bt-caixa-de-entrada"><i class="fas fa-envelope"></i> Caixa de\n                        entrada\n                    </button>\n\n                </div>'},btnMensagensEnviadas=function(n){return'<div class="form-group  col-lg-2 col-md-3 col-sm-6">\n                    <button class="btn btn-white btn-block nav-msg" type="button" id="bt-minhas-mensagens"><i class="fas fa-share-square"></i> Mensagens enviadas\n                    </button>\n                </div>'},btnNovaMensagem=function(n){return'<div class="form-group  col-lg-2 col-md-3 col-sm-6">\n                    <button class="btn btn-white btn-block nav-msg" type="button" id="bt-nova-mensagem"><i class="fa fa-plus"></i> Nova mensagem\n                    </button>\n                </div>'},n.exports=caixaDeEntrada},function(n,t){ultimasMensagens=function(n,t){var e="";return n.forEach((n,a)=>{a>4||(e+=itemUltimasMensagens(n,t))}),e+=`\n            <li>\n                <div class="text-center link-block">\n                    <a href="${t.base_url}/avisos/mensagens" class="dropdown-item">\n                        <strong>Ver todas</strong>\n                        <i class="fa fa-angle-right"></i>\n                    </a>\n                </div>\n            </li>\n            `},itemUltimasMensagens=function(n,t){var e=null===n.read_at?"no-read":"",a=null===n.alerta.user.foto?t.base_url+"/images/sem_foto.jpg":t.webservice_url+"/Usuario/"+n.alerta.user.foto;return`\n                    <li class="${e} notification-item" data-codigo="${n.alerta.codigo}">\n                        <div class="dropdown-messages-box">\n                            <a class="dropdown-item pull-left" style="padding: 5px">\n                                <img alt="" class="img-circle" src="${a}">\n                            </a>\n                            <div class="pull-right" style="width:80%">\n                                Mensagem de <strong>${n.alerta.user.name}</strong>: ${n.alerta.titulo}.<br>\n                                <small class="text-muted">Em `+moment(n.alerta.created_at).format("DD/MM/YYYY")+'</small>\n                            </div>\n                        </div>\n                    </li>\n                    <li role="separator" class="dropdown-divider divider"></li>'},n.exports=ultimasMensagens},function(n,t,e){e(0);responder=function(n,t){return a(n,t)};var a=function(n,t){let e="RE:"===n.alerta.titulo.substring(0,3)?n.alerta.titulo:"RE: "+n.alerta.titulo;moment(n.alerta.created_at).format("DD/MM/YYYY [as] HH:MM");return`\n        <div id="ctM_divResponderRenderized">\n            <div class="form-group">\n                <div class="input-group">\n                    <div class="input-group-addon">Para</div>\n                    <input type="text" class="form-control" name="destinatario" value="${n.alerta.user.name}" disabled>\n                </div>\n            </div>\n    \n                \n            <div class="form-group">\n                <div class="input-group">\n                    <div class="input-group-addon">Assunto</div>\n                    <input type="text" class="form-control" name="titulo" value="${e}">\n                </div>\n            </div>\n            \n            <div class="form-group">\n                <label for="titulo">Texto:</label>\n                <textarea name="texto" class="form-control" style="height: 400px" id="ctM_texto"></textarea>\n            </div>\n            \n            <div class="form-group">\n                <button class="btn btn-primary" id="ctM_btnEnviarResposta"><i class="fa fa-paper-plane"></i> Enviar</button>\n            </div>\n        </div>\n    `};n.exports=responder},function(n,t,e){e(0);ConversaHTML=function(n,t){return a(n,t)};var a=function(n,t){var e=`\n    <div class="ibox ct-info-mensagem"  data-codigo="${n[0].alerta.codigo}">\n            <div class="ibox-title">\n                <h2 style="font-weight: bold;">${n[0].alerta.titulo}</h2>\n            </div>\n\n            <div class="ibox-content ibox-mensagem">\n\n                <div class="row">\n                    <div class="text-left col-md-6">\n                        ${o()}\n                        ${r()}\n                    </div>\n                </div>`;return n.forEach(function(n){e+=s(n,t)}),e+="</div>\n        </div>\n    "},s=function(n,t){return`\n    <div class="row mensagem-cabecalho">\n                        <div class="col-xs-4 col-xs-offset-4 col-sm-2 col-sm-offset-0 col-md-1">\n                            <img class="img-responsive img-circle" src="${null===n.alerta.user.foto?t.base_url+"/images/sem_foto.jpg":t.webservice_url+"/Usuario/"+n.alerta.user.foto}" alt="Foto de ${n.alerta.user.name}">\n                        </div>\n                        <div class="col-xs-12 col-sm-10 col-md-11">\n                            <h3>${n.alerta.user.name}</h3>\n                            <small>${moment(n.alerta.created_at).format("DD/MM/YYYY")} as ${moment(n.alerta.created_at).format("HH:mm:ss")}</small>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-xs-12 mensagem-texto">\n                            ${n.alerta.texto.replace(/\r?\n/g,"<br />")}\n                        </div>\n                    </div>\n    `},o=function(){return'<button class="btn btn-success btn-sm btn-responder" id="bt-responder" title="Responder"><i class="fas fa-reply" style="width: 20px"></i>\n                            Responder</button>'},r=function(){return'<button class="btn btn-danger btn-sm btn-excluir" id="bt-excluir" title="Excluir"><i class="fas fa-trash-alt" style="width: 20px"></i>\n                            Excluir</button>'};n.exports=ConversaHTML},function(n,t,e){var a=e(0);mensagensEnviadas=function(n,t){return s(n,t)};var s=function(n,t){var e="<div>";return n.forEach(function(n){e+=o(n,t)}),e+="</div>"},o=function(n,t){return`\n        <div class="row enviada-box" data-codigo="${n.codigo}">\n            <a href="${t.base_url+"/avisos/mensagens/"+n.codigo}">\n                <div class="col-xs-12 col-sm-8 col-lg-10">\n                    <h4 style="color: green;">${n.titulo}</h4>            \n                    <p style="color: #333">${n.texto}</p>            \n                </div>   \n            </a>                 \n            <div class="col-xs-12 col-sm-4 col-lg-2">\n                <button class="btn btn-default"><i class="fa fa-trash"></i></button>\n                <small>${a.getDataRelativa(n.created_at)}</small>\n            </div>                    \n        </div>    \n    `};n.exports=mensagensEnviadas},function(n,t,e){var a=e(9);n.exports=class{constructor(n){this.config={duration:5e3},"object"==typeof n&&null!==n&&Object.assign(this.config,n)}setConfig(n){"object"==typeof n&&null!==n&&Object.assign(this.config,n)}setDuration(n){isNaN(n)?this.config.duration=n:console.error("Parâmetro inválido!")}showToast(n){let t=Math.ceil(1e3*Math.random());0===$(".toast-wrapper").length&&$("body").append('<div class="toast-wrapper"></div>'),$(".toast-wrapper").append(a(n,this.config,t)),$(".ct-toast#t_"+t).show();let e=this;setTimeout(function(){e.dismissToast(t)},this.config.duration),$(document).on("click","#toastClose",function(){e.dismissToast()})}dismissToast(n){$(".ct-toast#t_"+n).removeClass("animated fadeInUp"),setTimeout(function(){$(".ct-toast#t_"+n).addClass("animated fadeOutDown")},100),setTimeout(function(){$(".ct-toast#t_"+n).remove()},1e3)}}},function(n,t){ToastHTML=function(n,t,a){return e(n,t,a)};var e=function(n,t,e){let a=null===n.autor.foto?t.base_url+"/images/sem_foto.jpg":t.webservice_url+"/Usuario/"+n.autor.foto;return`\n<div class="ct-toast fadeInUp animated" id="t_${e}" data-id="${n.broadcast_messagem.id}">\n    <a href="#${n.broadcast_messagem.id}">\n        <div>\n            <div class="toast-close" id="toastClose">\n                <i class="fa fa-times fa-2x"></i>\n            </div>\n            <div class="img">\n                <img src="${a}" alt="" class="img-circle img-responsive">\n            </div>\n            <p class="lbl">Nova mensagem de <strong>${n.autor.name}</strong></p>\n        </div>\n    </a>\n</div>`};n.exports=ToastHTML}]);